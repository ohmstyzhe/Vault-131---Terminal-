/* =========================================================
   VAULT 131 TERMINAL — HEAVY CRT LOOK (full styles.css)
   ========================================================= */

/* ===== FEATURE: THEME + RESET START ===== */
:root{
  --bg: #000;

  /* phosphor */
  --phosphor: #7CFF63;
  --phosphor-dim: rgba(124,255,99,.65);
  --phosphor-faint: rgba(124,255,99,.25);

  --shadow: rgba(0,0,0,.9);
  --glass: rgba(255,255,255,.03);
  --warn: #ffcc66;

  /* ===== HEAVY CRT KNOBS ===== */
  --crt-noise-opacity: .22;   /* dirtier glass */
  --crt-mask-opacity: .18;    /* RGB subpixel mask strength */
  --crt-scan-opacity: .78;    /* scanline strength */
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: var(--bg);
  display:flex;
  align-items:center;
  justify-content:center;
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
  overflow:hidden;
}
/* ===== FEATURE: THEME + RESET END ===== */


/* ===== FEATURE: CRT LAYOUT START ===== */
.crt{
  position:relative;
  width:min(980px, 94vw);
  height:min(680px, 90vh);
  background:#020402;
  border-radius:28px;
  padding:22px;
  box-shadow:
    0 40px 120px rgba(0,0,0,.85),
    inset 0 0 0 2px rgba(255,255,255,.04);

  /* subtle monitor “presence” */
  background: radial-gradient(ellipse at center, #050b05 0%, #000 70%);

  /* slight jitter/flicker */
  animation: flicker 5.2s infinite;
}

/* iPad notch safe-area */
@supports (padding: env(safe-area-inset-top)) {
  .crt { padding-top: calc(22px + env(safe-area-inset-top)); }
}

/* big outer glass vignette + reflection */
.crt::before{
  content:"";
  position:absolute;
  inset: 10px;
  border-radius: 28px;
  pointer-events:none;

  background:
    /* glass sheen */
    radial-gradient(140% 120% at 50% 35%,
      rgba(255,255,255,.07) 0%,
      rgba(255,255,255,.02) 22%,
      rgba(0,0,0,0) 50%),
    /* heavy vignette */
    radial-gradient(120% 100% at 50% 50%,
      rgba(0,0,0,0) 40%,
      rgba(0,0,0,.70) 82%,
      rgba(0,0,0,.88) 100%);

  mix-blend-mode: screen;
  opacity: .85;
  filter: blur(.25px);
}

.terminal{
  position:relative;
  width:100%;
  height:100%;
  border-radius:18px;
  overflow:hidden;

  background:
    radial-gradient(120% 90% at 50% 35%, rgba(124,255,99,.12) 0%, rgba(0,0,0,0) 60%),
    linear-gradient(#010301, #000);

  box-shadow:
    inset 0 0 60px rgba(0,0,0,.85),
    inset 0 0 160px rgba(0,0,0,.60);

  /* barrel-ish tube illusion */
  transform: perspective(900px) rotateX(.6deg) rotateY(-.6deg);
}

/* inner glass bloom + edge darkening */
.terminal::before{
  content:"";
  position:absolute;
  inset:0;
  pointer-events:none;
  border-radius:18px;
  background:
    radial-gradient(140% 120% at 50% 50%,
      rgba(255,255,255,.06) 0%,
      rgba(255,255,255,0) 55%),
    radial-gradient(120% 100% at 50% 50%,
      rgba(0,0,0,0) 45%,
      rgba(0,0,0,.55) 85%,
      rgba(0,0,0,.75) 100%);
  mix-blend-mode: screen;
  opacity:.35;
}

/* text glow / phosphor bloom */
.terminal, .terminal *{
  color: var(--phosphor);
  text-shadow:
    0 0 14px rgba(124,255,99,.45),
    0 0 3px rgba(124,255,99,.45);
  -webkit-font-smoothing: none;
  text-rendering: geometricPrecision;
}

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 16px 10px 16px;
  letter-spacing:.08em;
  opacity:.9;
  user-select:none;
}
.topbar__center{ opacity:.85; }

.screen{
  position:relative;
  height: calc(100% - 108px);
  padding: 10px 18px 16px 18px;
  font-size: 18px;
  line-height: 1.35;
  filter: saturate(1.10);
}

/* chromatic fringing on headers (real CRT vibe) */
h1, h2{
  margin:0 0 10px 0;
  font-size: 22px;
  letter-spacing:.08em;
  text-shadow:
    0 0 16px rgba(124,255,99,.45),
    -1px 0 rgba(255,0,0,.18),
     1px 0 rgba(120,120,255,.12);
}

.statusbar{
  position:absolute;
  left:0; right:0; bottom:0;
  padding: 10px 14px;
  background: rgba(124,255,99,.12);
  border-top: 1px solid rgba(124,255,99,.2);
  color: rgba(124,255,99,.95);
  text-shadow: 0 0 10px rgba(124,255,99,.35);
  font-size: 15px;
  user-select:none;
}
/* ===== FEATURE: CRT LAYOUT END ===== */


/* ===== FEATURE: HEAVY CRT OVERLAYS START ===== */
.crt__vignette,
.crt__scanlines,
.crt__noise{
  position:absolute;
  inset:22px;
  border-radius:18px;
  pointer-events:none;
}

.crt__vignette{
  background:
    radial-gradient(120% 100% at 50% 50%,
      rgba(0,0,0,0) 35%,
      rgba(0,0,0,.80) 100%);
  mix-blend-mode:multiply;
  opacity:.95;
}

/* scanlines + secondary banding + RGB subpixel mask */
.crt__scanlines{
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(0,0,0,0) 0px,
      rgba(0,0,0,0) 2px,
      rgba(0,0,0,.28) 3px,
      rgba(0,0,0,0) 4px
    ),
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,.02) 0px,
      rgba(255,255,255,.02) 1px,
      rgba(0,0,0,0) 5px
    ),
    repeating-linear-gradient(
      to right,
      rgba(255,0,0,var(--crt-mask-opacity)) 0px,
      rgba(255,0,0,var(--crt-mask-opacity)) 1px,
      rgba(0,255,0,var(--crt-mask-opacity)) 1px,
      rgba(0,255,0,var(--crt-mask-opacity)) 2px,
      rgba(0,0,255,var(--crt-mask-opacity)) 2px,
      rgba(0,0,255,var(--crt-mask-opacity)) 3px
    );

  opacity: var(--crt-scan-opacity);
  mix-blend-mode: overlay;
  filter: blur(.15px);
}

/* animated grain/noise (uses assets/noise.png) */
.crt__noise{
  background-image: url("assets/noise.png");
  background-size: 240px 240px;
  opacity: var(--crt-noise-opacity);
  animation: noiseShift .6s steps(2,end) infinite;
  mix-blend-mode: overlay;
}

/* subtle “phosphor smear” + slight RGB edge on screen text */
.screen{
  text-shadow:
    0 0 14px rgba(124,255,99,.45),
    -0.8px 0 rgba(0,255,120,.18),
     0.8px 0 rgba(120,120,255,.12);
}

/* flicker + tiny vertical jitter */
@keyframes flicker{
  0%, 100% { filter: brightness(1) contrast(1.07); transform: translateY(0); }
  48% { filter: brightness(1.02) contrast(1.10); }
  50% { filter: brightness(.98) contrast(1.15); transform: translateY(.6px); }
  52% { filter: brightness(1.01) contrast(1.10); transform: translateY(-.4px); }
  70% { filter: brightness(1.00) contrast(1.10); }
}

@keyframes noiseShift{
  0%{ transform: translate(0,0); }
  25%{ transform: translate(-3px,2px); }
  50%{ transform: translate(2px,-2px); }
  75%{ transform: translate(3px,1px); }
  100%{ transform: translate(0,0); }
}
/* ===== FEATURE: HEAVY CRT OVERLAYS END ===== */


/* ===== FEATURE: UI COMPONENTS START ===== */
.dim{ color: var(--phosphor-dim); }
.faint{ color: var(--phosphor-faint); }

hr{
  border:none;
  border-top:1px solid rgba(124,255,99,.25);
  margin:14px 0;
}

.row{
  display:flex;
  gap:12px;
  flex-wrap:wrap;
  align-items:center;
}

label{
  display:block;
  margin: 10px 0 6px 0;
  color: var(--phosphor-dim);
}

input{
  width: min(520px, 100%);
  padding: 12px 12px;
  border-radius: 8px;
  border: 1px solid rgba(124,255,99,.25);
  background: rgba(0,0,0,.55);
  color: var(--phosphor);
  font: inherit;
  outline:none;
  box-shadow: inset 0 0 18px rgba(0,0,0,.75);
}
input:focus{
  border-color: rgba(124,255,99,.55);
  box-shadow: 0 0 0 3px rgba(124,255,99,.12), inset 0 0 18px rgba(0,0,0,.75);
}

button{
  font: inherit;
  color: var(--phosphor);
  background: rgba(0,0,0,.35);
  border: 1px solid rgba(124,255,99,.35);
  padding: 10px 14px;
  border-radius: 10px;
  cursor:pointer;
  user-select:none;
  box-shadow: inset 0 0 14px rgba(124,255,99,.08);
  transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
}
button:active{ transform: translateY(1px); }

button.glow,
button:hover{
  border-color: rgba(124,255,99,.85);
  box-shadow:
    inset 0 0 16px rgba(124,255,99,.14),
    0 0 18px rgba(124,255,99,.25),
    0 0 45px rgba(124,255,99,.12);
}

.small{ font-size: 14px; }

.codebox{
  display:inline-block;
  padding: 10px 12px;
  border: 1px dashed rgba(124,255,99,.35);
  border-radius: 10px;
  background: rgba(0,0,0,.45);
  letter-spacing:.22em;
  font-size: 22px;
}
/* ===== FEATURE: UI COMPONENTS END ===== */

/* ===== EXTRA LAYER THAT YOUR HTML WAS MISSING ===== */
.crt__outer{
  position:absolute;
  inset:0;
  border-radius:28px;
  pointer-events:none;

  background:
    radial-gradient(140% 120% at 50% 35%,
      rgba(255,255,255,.08) 0%,
      rgba(255,255,255,.02) 20%,
      rgba(0,0,0,0) 50%),
    radial-gradient(120% 100% at 50% 50%,
      rgba(0,0,0,0) 40%,
      rgba(0,0,0,.70) 82%,
      rgba(0,0,0,.90) 100%);

  mix-blend-mode: screen;
  opacity: .9;
  filter: blur(.25px);
}

/* ===== FIX: FORCE CRT LAYERS ON TOP START ===== */
.terminal { position: relative; }

.crt__vignette,
.crt__scanlines,
.crt__noise{
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 50;
  border-radius: 18px;
}

.topbar, .screen, .statusbar{
  position: relative;
  z-index: 10;
}
/* ===== FIX: FORCE CRT LAYERS ON TOP END ===== */

/* =========================================================
   ===== FEATURE: REAL CRT OVERRIDE START =====
   Paste at bottom of styles.css
   ========================================================= */

/* Stronger tube + glow */
.terminal{
  /* SVG warp = real curvature */
  filter: url(#crt-warp) contrast(1.15) brightness(1.06) saturate(1.10);

  /* stronger “hot phosphor” bloom */
  box-shadow:
    inset 0 0 70px rgba(0,0,0,.85),
    inset 0 0 220px rgba(0,0,0,.65),
    0 0 30px rgba(124,255,99,.10),
    0 0 90px rgba(124,255,99,.06);
}

/* Add heavy glass vignette + edge falloff */
.terminal::before{
  opacity: .55 !important;
  background:
    radial-gradient(130% 110% at 50% 45%,
      rgba(255,255,255,.08) 0%,
      rgba(255,255,255,.02) 22%,
      rgba(0,0,0,0) 50%),
    radial-gradient(120% 100% at 50% 50%,
      rgba(0,0,0,0) 38%,
      rgba(0,0,0,.55) 78%,
      rgba(0,0,0,.85) 100%) !important;
}

/* Make text glow “bleed” like CRT */
.screen, .topbar, .statusbar{
  text-shadow:
    0 0 2px rgba(124,255,99,.70),
    0 0 10px rgba(124,255,99,.40),
    0 0 26px rgba(124,255,99,.22);
}

/* Increase chromatic aberration on headings */
h1, h2{
  text-shadow:
    0 0 18px rgba(124,255,99,.55),
    -1.6px 0 rgba(255,40,40,.20),
     1.6px 0 rgba(70,140,255,.16);
}

/* HEAVIER scanlines + rolling band + phosphor mask */
.crt__scanlines{
  opacity: .92 !important;
  mix-blend-mode: overlay !important;
  filter: blur(.12px);

  background:
    /* main scanlines */
    repeating-linear-gradient(
      to bottom,
      rgba(0,0,0,0) 0px,
      rgba(0,0,0,0) 2px,
      rgba(0,0,0,.35) 3px,
      rgba(0,0,0,0) 4px
    ),
    /* rolling bright band */
    linear-gradient(
      to bottom,
      rgba(255,255,255,0) 0%,
      rgba(255,255,255,.06) 45%,
      rgba(255,255,255,0) 60%
    ),
    /* phosphor RGB triad mask (like your close-up pic) */
    repeating-linear-gradient(
      to right,
      rgba(255,0,0,.14) 0px,
      rgba(255,0,0,.14) 1px,
      rgba(0,255,0,.12) 1px,
      rgba(0,255,0,.12) 2px,
      rgba(0,0,255,.10) 2px,
      rgba(0,0,255,.10) 3px
    );

  animation: crt-roll 6.5s linear infinite;
}

/* Dirt / noise needs to be way stronger for “real” CRT */
.crt__noise{
  opacity: .22 !important;
  background-size: 160px 160px !important;
}

/* Add a faint haze layer (glass diffusion) */
.crt__vignette{
  opacity: .98 !important;
}

/* Tiny flicker (subtle, not annoying) */
.crt{
  animation: flicker 4.8s infinite !important;
}

@keyframes crt-roll{
  0%   { background-position: 0 0, 0 -120%, 0 0; }
  100% { background-position: 0 0, 0 120%, 0 0; }
}

/* =========================================================
   ===== FEATURE: REAL CRT OVERRIDE END =====
   ========================================================= */
  
  /* ===== FEATURE: MICRO WOBBLE START ===== */
@keyframes microWobble{
  0%,100% { transform: perspective(900px) rotateX(.6deg) rotateY(-.6deg) translateY(0); }
  50%     { transform: perspective(900px) rotateX(.6deg) rotateY(-.6deg) translateY(.4px); }
}
.terminal{ animation: microWobble 6.5s ease-in-out infinite; }
/* ===== FEATURE: MICRO WOBBLE END ===== */